<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Cloud Controller API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.36.min.js"></script>

      <script src="javascripts/all.js"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper tocify-sidebar">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">curl</a>
        </div>

      <div id="version-dropdown">
        <div class="dropdown">
          <button type="button" id="version-dropdown-button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Release Candidate<span class="caret">&#x25BE;</span></button>
          <ul id="version-dropdown-menu" class="dropdown-menu" role="menu" aria-labelledby="version-dropdown-button">
            <div class="dropdown-filter">
              <div class="dropdown-search-bar">
                <input id="version-select" type="text" placeholder="Filter">
              </div>
              <div class="dropdown-content">
                <ul class="dropdown-list" id="version-list">
                </ul>
              </div>
              <div class="dropdown-footer dropdown-content">
                <ul class="dropdown-list">
                  <li><a id="release-candidate" href="/version/release-candidate">Release Candidate</a></li>
                  <li><a id="latest-release" href="/">Latest</a></li>
                </ul>
              </div>
            </div>
          </ul>
        </div>
      </div>

        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>

      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          



          


          

          

          <h1 id="overview">Overview</h1>

<p>Welcome to the CF API docs!  These docs are under construction and is not yet complete.  If you can&rsquo;t find it here, please look at our older docs at apidocs.cloudfoundry.org</p>

          <h1 id="apps">Apps</h1>

<p>Apps are top-level object that link together and contain configuration
information for your packages, droplets, processes, tasks, and more.</p>

          <h2 id="get-an-app-39-s-task">Get an app&rsquo;s task</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/apps/:guid/tasks/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/:guid/tasks/[guid]"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "guid": "d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa",
  "name": "migrate",
  "command": "rake db:migrate",
  "state": "RUNNING",
  "memory_in_mb": 512,
  "environment_variables": {},
  "result": {
    "failure_reason": null
  },
  "links": {
    "self": {
      "href": "/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"
    },
    "app": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
    },
    "droplet": {
      "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
    }
  }
}

</code></pre>

<p>This endpoint retrieves a specific task on an app.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="list-an-app-39-s-tasks">List an app&rsquo;s tasks</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/apps/:guid/tasks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/:guid/tasks?names=mytask&amp;states=SUCCEEDED"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "pagination": {
    "total_results": 1,
    "first": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/tasks?names=mytask&amp;states=SUCCEEDED&amp;page=1&amp;per_page=50"
    },
    "last": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/tasks?names=mytask&amp;states=SUCCEEDED&amp;page=1&amp;per_page=50"
    },
    "next": null
    "previous": null
  },
  "resources": [
    {
      "guid": "a4b6d1ec-8803-2045-dfab-a66ca66ba77d",
      "name": "mytask",
      "command": "echo \"hello world\"",
      "state": "SUCCEEDED",
      "memory_in_mb": 512,
      "environment_variables": {
      },
      "result": {
        "failure_reason": null
      },
      "links": {
        "self": {
          "href": "/v3/tasks/da4b6d1ec-8803-2045-dfab-a66ca66ba77d"
        },
        "app": {
          "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
        },
        "droplet": {
          "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
        }
      }
    },
  ]
}

</code></pre>

<p>This endpoint retrieves the tasks the user has access to.</p>

<h3 id="query-parameters">Query Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      names

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Names of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      states

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">State of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guids

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Guids of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Page to display. Possible values are all integers >= 1.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      per_page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Number of results per page. Possible values are 1 through 5000.</p>
  </li>
</ul>

          <h2 id="cancel-an-app-39-s-task">Cancel an app&rsquo;s task</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">PUT</span> <span class="nn">/v3/apps/:guid/tasks/:guid/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/tasks/[guid]/cancel"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{}'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>

{
  "guid": "d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa",
  "name": "migrate",
  "command": "rake db:migrate",
  "state": "CANCELING",
  "memory_in_mb": 512,
  "environment_variables": {},
  "result": {
    "failure_reason": null
  },
  "links": {
    "self": {
      "href": "/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"
    },
    "app": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
    },
    "droplet": {
      "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
    }
  }
}

</code></pre>

<p>This endpoint cancels a running task.</p>

<p>Canceled tasks will initially be in state &ldquo;CANCELING&rdquo; and will move to state &ldquo;FAILED&rdquo; once the cancel request has been processed by Diego.</p>

<p>Cancel requests are idempotent and will be processed according to the state of the task when the request is executed.</p>

<p>Canceling a task that is in &ldquo;SUCCEEDED&rdquo; or &ldquo;FAILED&rdquo; state will return an error.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h1 id="packages">Packages</h1>

<p>A package is an application&rsquo;s &lsquo;source code&rsquo;; either raw bits for your application or a pointer to these bits.</p>

<p>In Cloud Foundry, packages are staged to produce an executable Droplet. We currently support raw bits and Docker packages.</p>

          <div class='no-margin'></div>

<h2 id="the-package-object">The package object</h2>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guid
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Unique GUID for the package</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      type
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Package type. Possible values are &ldquo;bits&rdquo;, &ldquo;docker&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      data
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Data for docker packages. Can be empty for bits packages.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      state
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">State of the package. Possible states are &ldquo;PROCESSING_UPLOAD&rdquo;, &ldquo;READY&rdquo;, &ldquo;FAILED&rdquo;, &ldquo;AWAITING_UPLOAD&rdquo;, &ldquo;COPYING&rdquo;, and &ldquo;EXPIRED&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      created_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the package was created.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      updated_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone with the package was last updated.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      links
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Links to related resources.</p>
  </li>
</ul>

          <h2 id="create-a-package">Create a package</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/apps/:guid/packages</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/packages"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "type": "docker",
    "data": {
      "image": "registry/image:latest"
    }
  }'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>

{
  "guid": "4cb65058-f04f-458f-aca1-5f4e43de6407",
  "type": "docker",
  "data": {
    "hash": {
      "type": "sha1",
      "value": null
    },
    "error": null,
    "image": "registry/image:latest"
  },
  "state": "READY",
  "created_at": "2015-11-03T00:53:54Z",
  "updated_at": null,
  "links":
  {
    "self": {
      "href": "/v3/packages/4cb65058-f04f-458f-aca1-5f4e43de6407"
    },
    "app": {
      "href": "/v3/apps/d8b8148d-5798-44de-821a-64b85b15e968"
    }
  }
}

</code></pre>

<p>This endpoint creates a new package.</p>

<h3 id="body-parameters">Body Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      type

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Package type. Possible values are &ldquo;bits&rdquo;, &ldquo;docker&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      data

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Data for docker packages. Can be empty for bits packages.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      data[&lsquo;image&rsquo;]

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Location of docker image. Required for docker packages.</p>
  </li>
</ul>

          <h2 id="get-a-package">Get a package</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/packages/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/packages/[guid]"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "guid": "44f7c078-0934-470f-9883-4fcddc5b8f13",
  "type": "bits",
  "data": {
    "hash": {
      "type": "sha1",
      "value": null
    },
    "error": null
  },
  "state": "PROCESSING_UPLOAD",
  "created_at": "2015-11-13T17:02:56Z",
  "updated_at": null,
  "links": {
    "self": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"
    },
    "upload": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload",
      "method": "POST"
    },
    "download": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download",
      "method": "GET"
    },
    "stage": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/droplets",
      "method": "POST"
    },
    "app": {
      "href": "/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"
    }
  }
}

</code></pre>

<p>This endpoint retrieves a specific package.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="stage-a-package">Stage a package</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/packages/:guid/droplets</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/packages/[guid]/droplets"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "environment_variables": {
      "CUSTOM_ENV_VAR": "hello"
    },
    "lifecycle": {
      "type": "buildpack",
      "data": {
        "buildpack": "http://github.com/myorg/awesome-buildpack",
        "stack": "cflinuxfs2"
      }
    }
  }'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>

{
  "guid": "whatuuid",
  "state": "PENDING",
  "error": null,
  "lifecycle": {
    "type": "buildpack",
    "data": {
      "buildpack": "http://github.com/myorg/awesome-buildpack",
      "stack": "cflinuxfs2"
    }
  },
  "memory_limit": 1024,
  "disk_limit": 4096,
  "result": {
    "buildpack": null,
    "stack": "cflinuxfs2",
    "process_types": null,
    "hash": {
      "type": "sha1",
      "value": null
    },
    "execution_metadata": null
  },
  "environment_variables":
  {
    "CUSTOM_ENV_VAR": "hello",
    "VCAP_APPLICATION": {
      "limits": {
        "mem": 1024,
        "disk": 4096,
        "fds": 16384
      },
      "application_id": "f82a88a2-2197-45b2-8b6d-84d1be8e2d0e",
      "application_version": "whatuuid",
      "application_name": "name-673",
      "application_uris": [ ],
      "version": "whatuuid",
      "name": "name-673",
      "space_name": "name-670",
      "space_id": "8543c9f2-0ec4-4bd2-adb4-eee7b2cd6c9d",
      "uris": [ ],
      "users": null
    },
    "CF_STACK": "cflinuxfs2",
    "MEMORY_LIMIT": 1024,
    "VCAP_SERVICES": { }
  },
  "created_at": "2015-11-03T00:53:54Z",
  "updated_at": null,
  "links": {
    "self": {
      "href": "/v3/droplets/whatuuid"
    },
    "package": {
      "href": "/v3/packages/aee22e31-6476-435e-a8c9-8961c6ead83e"
    },
    "app": {
      "href": "/v3/apps/f82a88a2-2197-45b2-8b6d-84d1be8e2d0e"
    },
    "assign_current_droplet": {
      "href": "/v3/apps/f82a88a2-2197-45b2-8b6d-84d1be8e2d0e/current_droplet",
      "method": "PUT"
    }
  }
}
</code></pre>

<p>This endpoint stages a package. Staging a package creates a droplet.</p>

<h3 id="body-parameters">Body Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      environment_variables

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">JSON object of environment variables to use during staging. Environment variable names may not start with &ldquo;VCAP_&rdquo; or &ldquo;CF_&rdquo;. &ldquo;PORT&rdquo; is not a valid environment variable. Example environment variables: {&ldquo;FEATURE_ENABLED&rdquo;: &ldquo;true&rdquo;}</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      memory_limit

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Memory limit used to stage package. Must be an integer.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      disk_limit

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Disk limit used to stage package. Must be an integer.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      lifecycle

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">JSON object of lifecycle information for a droplet. If not provided, it will default to a buildpack. Example lifecycle information: { &ldquo;type&rdquo;: &ldquo;buildpack&rdquo;, &ldquo;data&rdquo;: { &ldquo;buildpack&rdquo;: &ldquo;http://github.com/myorg/awesome-buildpack&rdquo;, &ldquo;stack&rdquo;: &ldquo;cflinuxfs2&rdquo; } }</p>
  </li>
</ul>

          <h2 id="upload-bits-for-a-package-of-type-39-bits-39">Upload bits for a package of type &lsquo;bits&rsquo;</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/packages/:guid/upload</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/packages/[guid]/upload"</span> <span class="se">\</span>
  -F <span class="nv">bits</span><span class="o">=</span>@<span class="s2">"package.zip"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "guid": "44f7c078-0934-470f-9883-4fcddc5b8f13",
  "type": "bits",
  "data": {
    "hash": {
      "type": "sha1",
      "value": null
    },
    "error": null
  },
  "state": "PROCESSING_UPLOAD",
  "created_at": "2015-11-13T17:02:56Z",
  "updated_at": null,
  "links": {
    "self": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13"
    },
    "upload": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/upload",
      "method": "POST"
    },
    "download": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/download",
      "method": "GET"
    },
    "stage": {
      "href": "/v3/packages/44f7c078-0934-470f-9883-4fcddc5b8f13/droplets",
      "method": "POST"
    },
    "app": {
      "href": "/v3/apps/1d3bf0ec-5806-43c4-b64e-8364dba1086a"
    }
  }
}

</code></pre>

<p>This endpoint uploads bits to an existing package of type &#39;bits&rsquo;. The bits must be sent as part of a multi-part form</p>

<h3 id="form-parameters">Form Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      bits

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">A binary zip file containing the package bits</p>
  </li>
</ul>

          <h2 id="delete-a-package">Delete a package</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/v3/packages/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/packages/[guid]"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre>

<p>This endpoint deletes a specific package.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="list-packages">List packages</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/packages</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/packages"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "pagination": {
    "total_results": 3,
    "first": {
      "href": "/v3/packages?page=1&amp;per_page=2"
    },
    "last": {
      "href": "/v3/packages?page=2&amp;per_page=2"
    },
    "next": {
      "href": "/v3/packages?page=2&amp;per_page=2"
    },
    "previous": null
  },
  "resources": [
    {
      "guid": "a57fd932-85db-483a-a27e-b00efbb3b0a4",
      "type": "bits",
      "data": {
        "hash": {
          "type": "sha1",
          "value": null
        },
        "error": null
      },
      "state": "AWAITING_UPLOAD",
      "created_at": "2015-11-03T00:53:54Z",
      "updated_at": null,
      "links": {
        "self": {
          "href": "/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4"
        },
        "upload": {
          "href": "/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4/upload",
          "method": "POST"
        },
        "download": {
          "href": "/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4/download",
          "method": "GET"
        },
        "stage": {
          "href": "/v3/packages/a57fd932-85db-483a-a27e-b00efbb3b0a4/droplets",
          "method": "POST"
        },
        "app": {
          "href": "/v3/apps/fa3558ce-1c4d-46fc-9776-54b9c8021745"
        }
      }
    },
    {
      "guid": "8f1f294d-cef8-4c11-9f0b-3bcdc0bd2691",
      "type": "docker",
      "data": {
        "hash": {
          "type": "sha1",
          "value": null
        },
        "error": null,
        "image": "http://location-of-image.com"
      },
      "state": "READY",
      "created_at": "2015-11-03T00:53:54Z",
      "updated_at": null,
      "links": {
        "self": {
          "href": "/v3/packages/8f1f294d-cef8-4c11-9f0b-3bcdc0bd2691"
        },
        "app": {
          "href": "/v3/apps/fa3558ce-1c4d-46fc-9776-54b9c8021745"
        }
      }
    }
  ]
}

</code></pre>

<p>This endpoint retrieves the packages the user has access to.</p>

<h3 id="query-parameters">Query Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Page to display. Possible values are all integers >= 1.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      per_page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Number of results per page. Possible values are 1 through 5000.</p>
  </li>
</ul>

          <h1 id="route-mappings">Route Mappings</h1>

<p>Route Mappings are relations between an app and a route; to direct traffic from a route to an app, you must first create a mapping.</p>

          <div class='no-margin'></div>

<h2 id="the-route_mapping-object">The route_mapping object</h2>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guid
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Unique GUID for route mapping</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      created_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the route mapping was created.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      updated_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the route mapping was last updated.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      links
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Links to related resources.</p>
  </li>
</ul>

          <h2 id="create-a-route-mapping">Create a route mapping</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/apps/:guid/route_mappings</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/route_mappings"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "relationships": {
      "route": {
        "guid": "9612ecbd-36f1-4ada-927a-efae9310b3a1"
      },
    }
  }'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>

{
   "guid": "89323d4e-2e84-43e7-83e9-adbf50a20c0e",
   "created_at": "2016-02-17T01:50:05Z",
   "updated_at": null,
   "links": {
      "self": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings/89323d4e-2e84-43e7-83e9-adbf50a20c0e"
      },
      "app": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
      },
      "route": {
         "href": "/v2/routes/9612ecbd-36f1-4ada-927a-efae9310b3a1"
      },
      "process": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes/web"
      }
   }
}

</code></pre>

<p>This endpoint creates a new route mapping.</p>

<h3 id="body-parameters">Body Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      relationships[&lsquo;route&rsquo;]['guid&rsquo;]

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Guid of the route to which you would like to map the app.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      relationships['process&rsquo;]['type&rsquo;]

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Type of the process on the app to which you would like to map the route. Defaults to 'web&rsquo;</p>
  </li>
</ul>

          <h2 id="get-a-route-mapping">Get a route mapping</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/apps/:guid/route_mappings/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/route_mappings/[guid]"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
   "guid": "89323d4e-2e84-43e7-83e9-adbf50a20c0e",
   "created_at": "2016-02-17T01:50:05Z",
   "updated_at": null,
   "links": {
      "self": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings/89323d4e-2e84-43e7-83e9-adbf50a20c0e"
      },
      "app": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
      },
      "route": {
         "href": "/v2/routes/9612ecbd-36f1-4ada-927a-efae9310b3a1"
      },
      "process": {
         "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes/web"
      }
   }
}

</code></pre>

<p>This endpoint retrieves a specific route mapping.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="delete-a-route-mapping">Delete a route mapping</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/v3/apps/:guid/route_mappings/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/route_mappings/[guid]"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre>

<p>This endpoint deletes a specific route mapping.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="list-route-mappings">List route mappings</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/apps/:guid/route_mappings</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/route_mappings"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "pagination": {
    "total_results": 3,
    "first": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings?page=1&amp;per_page=2"
    },
    "last": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings?page=2&amp;per_page=2"
    },
    "next": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings?page=2&amp;per_page=2"
    },
    "previous": null
  },
  "resources": [
    {
       "guid": "89323d4e-2e84-43e7-83e9-adbf50a20c0e",
       "created_at": "2016-02-17T01:50:05Z",
       "updated_at": null,
       "links": {
          "self": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings/89323d4e-2e84-43e7-83e9-adbf50a20c0e"
          },
          "app": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
          },
          "route": {
             "href": "/v2/routes/9612ecbd-36f1-4ada-927a-efae9310b3a1"
          },
          "process": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes/web"
          }
       }
    },
    {
       "guid": "9f4970a8-9e6f-4984-b0a5-5e4a8af91665",
       "created_at": "2016-02-17T01:50:05Z",
       "updated_at": null,
       "links": {
          "self": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/route_mappings/9f4970a8-9e6f-4984-b0a5-5e4a8af91665"
          },
          "app": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
          },
          "route": {
             "href": "/v2/routes/a32332f0-fb30-4e9e-9b78-348b8b6b98b6"
          },
          "process": {
             "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5/processes/web"
          }
       }
    }
  ]
}

</code></pre>

<p>This endpoint retrieves the route mappings the user has access to.</p>

<h3 id="query-parameters">Query Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Page to display. Possible values are all integers >= 1.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      per_page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Number of results per page. Possible values are 1 through 5000.</p>
  </li>
</ul>

          <h1 id="service-bindings">Service Bindings</h1>

<p>Service bindings are relations between a service instance and an app; to use a service instance with an app, you must first bind them together.</p>

<p>Not all services support binding, as some services deliver value to users directly without integration with an application.</p>

          <div class='no-margin'></div>

<h2 id="the-service_binding-object">The service_binding object</h2>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guid
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Unique GUID for the service binding</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      type
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Service binding type. Currently only possible value is &ldquo;app&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      data
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Data returned from the service broker for the service instance. Currently possible values are &ldquo;credentials&rdquo; and &ldquo;syslog_drain_url&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      created_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the service binding was created.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      updated_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the service binding was last updated.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      links
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Links to related resources.</p>
  </li>
</ul>

          <h2 id="create-a-service-binding">Create a service binding</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/service_bindings</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/service_bindings"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "type": "app",
    "relationships": {
      "app": {
        "guid": "74f7c078-0934-470f-9883-4fddss5b8f13"
      },
      "service_instance": {
        "guid": "8bfe4c1b-9e18-45b1-83be-124163f31f9e"
      },
    },
    "data": {
      "parameters": {
        "some_object_id": "for_the_service_broker"
      }
    }
  }'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>

{
  "guid": "dde5ad2a-d8f4-44dc-a56f-0452d744f1c3",
  "type": "app",
  "data": {
    "credentials": {
      "super-secret": "password"
    },
    "syslog_drain_url": "syslog://drain.url.com"
  },
  "created_at": "2015-11-13T17:02:56Z",
  "updated_at": null,
  "links": {
    "self": {
      "href": "/v3/service_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"
    },
    "service_instance": {
      "href": "/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"
    },
    "app": {
      "href": "/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"
    }
  }
}

</code></pre>

<p>This endpoint creates a new service binding.</p>

<h3 id="body-parameters">Body Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      type

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Service binding type. Currently, the only possible value is &ldquo;app&rdquo;.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      relationships[&lsquo;app&rsquo;]['guid&rsquo;]

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Guid of the app to which you would like to bind the service instance.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      relationships['service_instance&rsquo;]['guid&rsquo;]

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Guid of the service instance to which you would like to bind the app.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      data['parameters&rsquo;]

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Additional configuration parameters for the service binding.</p>
  </li>
</ul>

          <h2 id="get-a-service-binding">Get a service binding</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/service_bindings/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/service_bindings/[guid]"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "guid": "dde5ad2a-d8f4-44dc-a56f-0452d744f1c3",
  "type": "app",
  "data": {
    "credentials": {
      "super-secret": "password"
    },
    "syslog_drain_url": "syslog://drain.url.com"
  },
  "created_at": "2015-11-13T17:02:56Z",
  "updated_at": null,
  "links": {
    "self": {
      "href": "/v3/service_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"
    },
    "service_instance": {
      "href": "/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"
    },
    "app": {
      "href": "/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"
    }
  }
}

</code></pre>

<p>This endpoint retrieves a specific service binding.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="delete-a-service-binding">Delete a service binding</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/v3/service_bindings/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/service_bindings/[guid]"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre>

<p>This endpoint deletes a specific service binding.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="list-service-bindings">List service bindings</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/service_bindings</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/service_bindings"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "pagination": {
    "total_results": 3,
    "first": {
      "href": "/v3/service_bindings?page=1&amp;per_page=2"
    },
    "last": {
      "href": "/v3/service_bindings?page=2&amp;per_page=2"
    },
    "next": {
      "href": "/v3/service_bindings?page=2&amp;per_page=2"
    },
    "previous": null
  },
  "resources": [
    {
      "guid": "dde5ad2a-d8f4-44dc-a56f-0452d744f1c3",
      "type": "app",
      "data": {
        "credentials": {
          "super-secret": "password"
        },
        "syslog_drain_url": "syslog://drain.url.com"
      },
      "created_at": "2015-11-13T17:02:56Z",
      "updated_at": null,
      "links": {
        "self": {
          "href": "/v3/service_bindings/dde5ad2a-d8f4-44dc-a56f-0452d744f1c3"
        },
        "service_instance": {
          "href": "/v3/service_instances/8bfe4c1b-9e18-45b1-83be-124163f31f9e"
        },
        "app": {
          "href": "/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"
        }
      }
    },
    {
      "guid": "7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62",
      "type": "app",
      "data": {
        "credentials": {
          "super-secret": "password"
        },
        "syslog_drain_url": "syslog://drain.url.com"
      },
      "created_at": "2015-11-13T17:02:56Z",
      "updated_at": null,
      "links": {
        "self": {
          "href": "/v3/service_bindings/7aa37bad-6ccb-4ef9-ba48-9ce3a91b2b62"
        },
        "service_instance": {
          "href": "/v3/service_instances/8bf356j3-9e18-45b1-3333-124163f31f9e"
        },
        "app": {
          "href": "/v3/apps/74f7c078-0934-470f-9883-4fddss5b8f13"
        }
      }
    }
  ]
}

</code></pre>

<p>This endpoint retrieves the service bindings the user has access to.</p>

<h3 id="query-parameters">Query Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Page to display. Possible values are all integers >= 1.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      per_page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Number of results per page. Possible values are 1 through 5000.</p>
  </li>
</ul>

          <h1 id="tasks">Tasks</h1>

<p>Tasks are one-off jobs that are intended to perform a task, stop, and be cleaned up, freeing up resources.</p>

<p>Examples of this include database migrations, sending things, and batch jobs.</p>

          <div class='no-margin'></div>

<h2 id="the-task-object">The task object</h2>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guid
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Unique GUID for the task</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      name
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">User-facing name of the task.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      command
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Command that will be executed</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      environment_variables
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Environment variables set on the
    container running your task.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      memory_in_mb
      <span class="method-list-item-type">integer</span>
    </h4>

    <p class="method-list-item-description">Maximum memory for the task in MB.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      state
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">State of the task. Possible states are PENDING, RUNNING, SUCCEEDED, CANCELING, and FAILED</p>
  </li>
  <li class="method-list-item">
      <h4 class="method-list-item-label">
        result
        <span class="method-list-item-type">object</span>
      </h4>

      <p class="method-list-item-description">Results from the task</p>
  </li>
  <li class="method-list-item">
      <h4 class="method-list-item-label">
        result[failure_reason]
        <span class="method-list-item-type">string</span>
      </h4>

      <p class="method-list-item-description">Null if the task succeeds, contains the error message if it fails.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      created_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the task was created.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      updated_at
      <span class="method-list-item-type">datetime</span>
    </h4>

    <p class="method-list-item-description">The time with zone when the task was last updated.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      links
      <span class="method-list-item-type">object</span>
    </h4>

    <p class="method-list-item-description">Links to related resources.</p>
  </li>
</ul>

          <h2 id="create-a-task">Create a task</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/v3/apps/:guid/tasks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/apps/[guid]/tasks"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "name": "migrate",
    "command": "rake db:migrate",
    "memory_in_mb": 512,
  }'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>

{
  "guid": "d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa",
  "name": "migrate",
  "command": "rake db:migrate",
  "state": "RUNNING",
  "memory_in_mb": 512,
  "environment_variables": {},
  "result": {
    "failure_reason": null
  },
  "links": {
    "self": {
      "href": "/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"
    },
    "app": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
    },
    "droplet": {
      "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
    }
  }
}

</code></pre>

<p>This endpoint creates a new task.</p>

<p>Environment variables specified in the request body will overwrite and be appended to the environment variables set on the app associated with your task.
These overwrite and are appended to the app&rsquo;s running environment variable group.</p>

<h3 id="body-parameters">Body Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      name

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">User-facing name of the task</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      command

      <span class="method-list-item-type method-list-item-type-required">required</span>
    </h4>

    <p class="method-list-item-description">Command that will be executed</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
     environment_variables
     <span class="method-list-item-type">optional</span>
    </h4>
    <p class="method-list-item-description">Environment variables passed to the
    container running your task.</p>

  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      memory_in_mb
      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Maximum memory for the task in MB. Will default to operater-configurable &lsquo;default_app_memory&rsquo; if not set.</p>
  </li>
</ul>

          <h2 id="get-a-task">Get a task</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/tasks/:guid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/tasks/[guid]"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "guid": "d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa",
  "name": "migrate",
  "command": "rake db:migrate",
  "state": "RUNNING",
  "memory_in_mb": 512,
  "environment_variables": {},
  "result": {
    "failure_reason": null
  },
  "links": {
    "self": {
      "href": "/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"
    },
    "app": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
    },
    "droplet": {
      "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
    }
  }
}

</code></pre>

<p>This endpoint retrieves a specific task.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

          <h2 id="list-tasks">List tasks</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/v3/tasks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/tasks?names=mytask&amp;states=SUCCEEDED"</span> <span class="se">\</span>
  -X GET <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>

{
  "pagination": {
    "total_results": 1,
    "first": {
      "href": "/v3/tasks?names=mytask&amp;states=SUCCEEDED&amp;page=1&amp;per_page=50"
    },
    "last": {
      "href": "/v3/tasks?names=mytask&amp;states=SUCCEEDED&amp;page=1&amp;per_page=50"
    },
    "next": null
    "previous": null
  },
  "resources": [
    {
      "guid": "a4b6d1ec-8803-2045-dfab-a66ca66ba77d",
      "name": "mytask",
      "command": "echo \"hello world\"",
      "state": "SUCCEEDED",
      "memory_in_mb": 512,
      "environment_variables": {
      },
      "result": {
        "failure_reason": null
      },
      "links": {
        "self": {
          "href": "/v3/tasks/da4b6d1ec-8803-2045-dfab-a66ca66ba77d"
        },
        "app": {
          "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
        },
        "droplet": {
          "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
        }
      }
    },
  ]
}

</code></pre>

<p>This endpoint retrieves the tasks the user has access to.</p>

<h3 id="query-parameters">Query Parameters</h3>

<ul class="method-list-group">
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      names

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Names of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      states

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">State of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      guids

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Guids of tasks to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      app_guids

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Guids of apps to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      organization_guids

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Guids of organizations to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      space_guids

      <span class="method-list-item-type">optional</span>
      <span class="method-list-item-type">string</span>
    </h4>

    <p class="method-list-item-description">Guids of spaces to filter by.</p>
    </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Page to display. Possible values are all integers >= 1.</p>
  </li>
  <li class="method-list-item">
    <h4 class="method-list-item-label">
      per_page

      <span class="method-list-item-type">optional</span>
    </h4>

    <p class="method-list-item-description">Number of results per page. Possible values are 1 through 5000.</p>
  </li>
</ul>

          <h2 id="cancel-a-task">Cancel a task</h2>
<pre class="highlight plaintext"><code>Definition
</code></pre>
<pre class="highlight http"><code><span class="nf">PUT</span> <span class="nn">/v3/tasks/:task_guid/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Request
</code></pre>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.[your-domain.com]/v3/tasks/[guid]/cancel"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Authorization: bearer [token]"</span> <span class="se">\</span>
  -d <span class="s1">'{}'</span>
</code></pre>
<pre class="highlight plaintext"><code>Example Response
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">202</span> <span class="ne">Accepted</span>

{
  "guid": "d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa",
  "name": "migrate",
  "command": "rake db:migrate",
  "state": "CANCELING",
  "memory_in_mb": 512,
  "environment_variables": {},
  "result": {
    "failure_reason": null
  },
  "links": {
    "self": {
      "href": "/v3/tasks/d5cc22ec-99a3-4e6a-af91-a44b4ab7b6fa"
    },
    "app": {
      "href": "/v3/apps/ccc25a0f-c8f4-4b39-9f1b-de9f328d0ee5"
    },
    "droplet": {
      "href": "/v3/droplets/740ebd2b-162b-469a-bd72-3edb96fabd9a"
    }
  }
}

</code></pre>

<p>This endpoint cancels a running task.</p>

<p>Canceled tasks will initially be in state &ldquo;CANCELING&rdquo; and will move to state &ldquo;FAILED&rdquo; once the cancel request has been processed by Diego.</p>

<p>Cancel requests are idempotent and will be processed according to the state of the task when the request is executed.</p>

<p>Canceling a task that is in &ldquo;SUCCEEDED&rdquo; or &ldquo;FAILED&rdquo; state will return an error.</p>

<h3 id="body-parameters">Body Parameters</h3>

<p class='no-body-parameters-outer'>
  <span class='no-body-parameters-required'>
    No arguments
  </span>
</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">curl</a>
          </div>
      </div>
    </div>
  </body>
</html>
